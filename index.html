<!DOCTYPE HTML>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Base JS Add HW2 A4+</title>
		<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
		<meta name="HandheldFriendly" content="True"/> <!--В некоторых случаях смартфоны автоматически изменяют масштаб страницы, лучше эту возможность отключать-->
		<!-- saved from url=(0014)about:internet -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/> <!--Для включения сглаживания шрифтов -->
		<meta http-equiv="cleartype" content="on"/> <!--Чтобы переключить Internet Explorer в режим последней версии -->
		
	</head>
	<body>

		<script>

			'use strict'
			
			let input = prompt("Введите строку");

			let checkIsPalindrom = (str) => {

				if ( str.includes(' ') ) {  //Для удаления пробелов
					str = str.replace(/\s+/g, '');
				}

				str = str.toLowerCase(); // Для игнорирования регистра

				let punctuation = /[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-.\/:;<=>?@\[\]^_`{|}~]/g;
				str = str.replace(punctuation,"");  //Для удаления знаков препинания

				if ( str.includes('ь') ) {  //Для удаления ь
					str = str.replace(/\ь+/g, '');
				}
				if ( str.includes('ъ') ) {  //Для удаления ъ
					str = str.replace(/\ъ+/g, '');
				}

				if ( str.includes('ё') ) {  //Для нивелирования разницы е и ё
					str = str.replace(/\ё+/g, 'е');
				}

				let i = 0;
				let j = str.length - 1;
				
				let recursion = (str, i, j) =>{
					let strStart = str[i];
					let strEnd = str[j];

					if (strStart !== strEnd) {
						return false;
					} else if (i < j) {
						strStart = str[i++];
						strEnd = str[j--];
						recursion(str);	
						return true;
					}					
				}
				
				return recursion(str, i, j);			
			}

			alert(checkIsPalindrom(input)?'Это палиндром':'Это не палиндром');
			
		</script>

	</body>
</html>
